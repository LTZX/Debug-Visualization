<table class="sourcetable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre></div></td><td class="code"><div class="source" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">create_app</span>(object_name):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    An flask application factory, as explained here:</span>
<span style="color: #BA2121; font-style: italic">    http://flask.pocoo.org/docs/patterns/appfactories/</span>

<span style="color: #BA2121; font-style: italic">    Arguments:</span>
<span style="color: #BA2121; font-style: italic">        object_name: the python path of the config object,</span>
<span style="color: #BA2121; font-style: italic">                     e.g. appname.settings.ProdConfig</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>

    app <span style="color: #666666">=</span> Flask(<span style="color: #19177C">__name__</span>)

    app<span style="color: #666666">.</span>config<span style="color: #666666">.</span>from_object(object_name)

    <span style="color: #408080; font-style: italic"># initialize the cache</span>
    cache<span style="color: #666666">.</span>init_app(app)

    <span style="color: #408080; font-style: italic"># initialize the debug tool bar</span>
    debug_toolbar<span style="color: #666666">.</span>init_app(app)

    <span style="color: #408080; font-style: italic"># initialize SQLAlchemy</span>
    db<span style="color: #666666">.</span>init_app(app)

    login_manager<span style="color: #666666">.</span>init_app(app)

    <span style="color: #408080; font-style: italic"># Import and register the different asset bundles</span>
    assets_env<span style="color: #666666">.</span>init_app(app)
    assets_loader <span style="color: #666666">=</span> PythonAssetsLoader(assets)
    <span style="color: #008000; font-weight: bold">for</span> name, bundle <span style="color: #AA22FF; font-weight: bold">in</span> assets_loader<span style="color: #666666">.</span>load_bundles()<span style="color: #666666">.</span>items():
        assets_env<span style="color: #666666">.</span>register(name, bundle)

    <span style="color: #408080; font-style: italic"># register our blueprints</span>
    app<span style="color: #666666">.</span>register_blueprint(main)

    app<span style="color: #666666">.</span>register_blueprint(auth)

    app<span style="color: #666666">.</span>register_blueprint(admin, url_prefix<span style="color: #666666">=</span><span style="color: #BA2121">&#39;/admin&#39;</span>)

    app<span style="color: #666666">.</span>register_blueprint(student, url_prefix<span style="color: #666666">=</span><span style="color: #BA2121">&#39;/dashboard&#39;</span>)

    app<span style="color: #666666">.</span>register_blueprint(api, url_prefix<span style="color: #666666">=</span>API_PREFIX)
</pre></div>
</td></tr></table>