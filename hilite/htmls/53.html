<table class="sourcetable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="source" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>    <span style="color: #AA22FF">@wraps</span>(func)
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">wrapper</span>(<span style="color: #666666">*</span>args, <span style="color: #666666">**</span>kwargs):
        supplied <span style="color: #666666">=</span> request<span style="color: #666666">.</span>args<span style="color: #666666">.</span>get(<span style="color: #BA2121">&#39;client_version&#39;</span>, <span style="color: #BA2121">&#39;&#39;</span>)
        current_version, download_link <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;2&#39;</span>, <span style="color: #BA2121">&#39;&#39;</span>  <span style="color: #408080; font-style: italic"># TODO Actual Version Check</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> supplied <span style="color: #AA22FF; font-weight: bold">or</span> supplied <span style="color: #666666">==</span> current_version:
            <span style="color: #008000; font-weight: bold">return</span> func(<span style="color: #666666">*</span>args, <span style="color: #666666">**</span>kwargs)

        message <span style="color: #666666">=</span> (<span style="color: #BA2121">&quot;Incorrect client version. Supplied version was {}. &quot;</span> <span style="color: #666666">+</span>
                   <span style="color: #BA2121">&quot;Correct version is {}.&quot;</span>)<span style="color: #666666">.</span>format(supplied, current_version)
        data <span style="color: #666666">=</span> {
            <span style="color: #BA2121">&#39;supplied&#39;</span>: supplied,
            <span style="color: #BA2121">&#39;correct&#39;</span>: current_version,
            <span style="color: #BA2121">&#39;download_link&#39;</span>: download_link
        }

        response <span style="color: #666666">=</span> jsonify(<span style="color: #666666">**</span>{
            <span style="color: #BA2121">&#39;status&#39;</span>: <span style="color: #666666">403</span>,
            <span style="color: #BA2121">&#39;message&#39;</span>: message,
            <span style="color: #BA2121">&#39;data&#39;</span>: data
        })
        response<span style="color: #666666">.</span>status_code <span style="color: #666666">=</span> <span style="color: #666666">403</span>
        <span style="color: #008000; font-weight: bold">return</span> response
    <span style="color: #008000; font-weight: bold">return</span> wrapper
</pre></div>
</td></tr></table>